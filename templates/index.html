<!DOCTYPE html>
<html>
  <head>
    <title>Media search</title>
  </head>

  <body>
    <p>Check if a movie is streaming on Netflix, HBO, Hulu, Amazon Prime, or Showtime</p>
    <form action="/search" method="get">
        <input type="text" name="q" value="{{ query }}" size=40></input>
        <input type="submit" value="Search Movies"></input>
    </form>
    <form action="/result" method="post">
        <input type="text" name="showq" size=40></input>
        <input type="submit" value="Search Shows"></input>
    </form>

    {% if (isresult and sources) %}  <!-- search result with source -->
        <p>The {{ qtype }} {{ media['title'] }} ({{ media['year'] }})
            <a href='http://www.imdb.com/title/{{ media['imdb'] }}'>imdb</a>
            is available on these streaming services:</p>

        <ul>
        {% for source in sources %}
            <li>{{ source['name'] }} <a href="{{ source['link'] }}">go</a></li>
        {% endfor %}
        </ul>
 
    {% elif isresult %}  <!-- search result without source -->
        <p>The {{ qtype }} {{ media['title'] }} ({{ media['year'] }})
            <a href='http://www.imdb.com/title/{{ media['imdb'] }}'>imdb</a>
            doesn't seem available on these streaming services.</p>

    {% elif query %}  <!-- no search results after query was performed -->
          <p>Your search for "{{ query }}" did not match any results.
    {% endif %}

    {% if other_results %}  <!-- lists other results if available -->
        <p>...or did you mean?:
        {% for item in other_results %}
            <a href="{{ item['href'] }}">{{ item['title'] }}</a> &nbsp
        {% endfor %}
        </p>
    {% endif %}
    
  </body>
</html>
