{% extends 'layout.html' %}
{% set active_page = 'watchlist' %}

{% block body %}
  {% include 'includes/_searchbar.html' %}
  <div class="clearfix" style="margin-top: 20px;"></div>

  {% raw %}
    <div id="vueapp">
      <div v-if="wlist.length == 0">
        <h3>Watchlist empty... search and add</h3>
      </div>
      <div v-else class="panel panel-default">
        <table class="table table-condensed table-striped">
          <tr>
            <th class="col-md-1"></th>
            <th class="col-md-4">Title</th>
            <th class="col-md-4">Sources</th>
            <th class="col-md-3"></th>
          </tr>
          <tr v-for="w in wlist">
            <td v-if="w.mtype == 'show'"><img class="icon" src="static/glyphicon-tv.png" alt="tv icon" /></td>
            <td v-else><img class="icon" src="static/glyphicon-film.png" alt="film icon" /></td>
            <td>{{ w.title }}</td>
            <td>
              <span v-for="s in w.sources">
                <a :href="s.link">{{ s.display_name }}</a> &nbsp;
              </span>
            </td>
            <td><a :href="'/watchlist/delete/' + w.mtype + '/' + w.id">Delete</a></td>
          </tr>
        </table>
      </div>
    </div>
  {% endraw %}

    <script>
        var watchlist = {{ watchlist|safe }};
        new Vue({
            el: "#vueapp",
            data: {
                wlist: watchlist
            }
        });
    </script>

{% endblock %}
